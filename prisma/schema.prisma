// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int       @id @default(autoincrement())
  discordId String    @unique
  language  String
  messages  Message[]
  TopDeck   TopDeck[]
  role      Role      @relation(fields: [roleId], references: [id])
  roleId    Int
}

model Message {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  content   String?
  author    User     @relation(fields: [authorId], references: [id])
  authorId  Int
}

model Synonym {
  id       Int    @id @default(autoincrement())
  key      String @unique
  value    String
  imageURL String
}

model Card {
  id             Int         @id @default(autoincrement())
  cardId         String      @unique
  importId       String      @unique
  imageURL       String
  goldenImageURL String
  thumbURL       String
  set            String
  title          String
  description    String
  type           String
  attack         Int
  defense        Int
  kredits        Int
  operationCost  Int
  rarity         String
  faction        String
  version        String
  attributes     Attribute[]
}

model Attribute {
  id      Int     @id @default(autoincrement())
  content String?
  card    Card    @relation(fields: [cardId], references: [id])
  cardId  Int
}

model TopDeck {
  id     Int    @id @default(autoincrement())
  player User   @relation(fields: [userId], references: [id])
  userId Int
  state  String
}

model Role {
  id   Int    @id @default(autoincrement())
  name String @unique
  User User[]
}
